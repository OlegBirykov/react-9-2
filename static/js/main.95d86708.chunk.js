(this["webpackJsonpreact-9"]=this["webpackJsonpreact-9"]||[]).push([[0],{26:function(t,e,a){},34:function(t,e,a){"use strict";a.r(e);var r=a(1),s=a(0),n=a.n(s),c=a(19),i=a.n(c),o=a(5),u=a(2),d=(a(26),a(9)),j=Object(s.createContext)({data:[],waiting:!1,error:""});var p=function(t){var e=Object(s.useState)([]),a=Object(d.a)(e,2),n=a[0],c=a[1],i=Object(s.useState)(!1),o=Object(d.a)(i,2),u=o[0],p=o[1],l=Object(s.useState)(""),b=Object(d.a)(l,2),h=b[0],m=b[1];return Object(r.jsx)(j.Provider,{value:{data:n,waiting:u,error:h,setData:c,setWaiting:p,setError:m},children:t.children})},l=a(4),b=a.n(l),h=a(10),m=a(15),f=a.n(m);var O=a.p+"static/media/post-top.20e1f623.jpg",x=a.p+"static/media/post-bottom.4dd3d138.jpg";var v=function(t){var e=t.content,a=t.created,n=Object(s.useState)(""),c=Object(d.a)(n,2),i=c[0],o=c[1],u=function(){var t=function(t){var e=f()(t),a=f()();if(!e.isValid())return"";var r=a.diff(e,"minutes");if(r<1)return"\u0422\u043e\u043b\u044c\u043a\u043e \u0447\u0442\u043e";if(r<60)return r+" \u043c\u0438\u043d.";var s=a.diff(e,"hours");if(s<24)return s+" \u0447.";var n=a.diff(e,"days");return n<30?n+" \u0434\u043d.":a.diff(e,"months")+" \u043c\u0435\u0441."}(a);t!==i&&o(t)};return Object(s.useEffect)((function(){u();var t=setInterval(u,5e3);return function(){return clearInterval(t)}}),[]),Object(r.jsxs)("div",{className:"Post",children:[Object(r.jsx)("img",{className:"Post-image-top",src:O,width:"100%",alt:"no load"}),Object(r.jsx)("p",{className:"Post-ago",children:i}),Object(r.jsx)("p",{className:"Post-content",children:e}),Object(r.jsx)("img",{className:"Post-image-bottom",src:x,width:"100%",alt:"no load"}),t.children]})};function N(t,e){return g.apply(this,arguments)}function g(){return(g=Object(h.a)(b.a.mark((function t(e,a){var r,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={data:[],error:""},t.prev=1,t.next=4,fetch(e,a);case 4:if((s=t.sent).ok){t.next=7;break}throw new Error(s.statusText);case 7:if(a){t.next=11;break}return t.next=10,s.json();case 10:r.data=t.sent;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),r.error=t.t0.message?t.t0.message:"No Server Response";case 16:return t.prev=16,t.abrupt("return",r);case 19:case"end":return t.stop()}}),t,null,[[1,13,16,19]])})))).apply(this,arguments)}var w=a.p+"static/media/comment.9fb43a42.jpg";var P=function(){var t=Object(s.useContext)(j),e=t.data,a=t.setData,n=t.setWaiting,c=t.setError;return Object(s.useEffect)((function(){function t(){return(t=Object(h.a)(b.a.mark((function t(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(!0),t.next=3,N("https://react-9-2-backend.herokuapp.com/posts");case 3:e=t.sent,c(e.error),a(e.data),n(!1);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[a,c,n]),Object(r.jsxs)("div",{className:"PostsList",children:[Object(r.jsx)("div",{className:"PostsList-new",children:Object(r.jsx)(o.b,{to:"/react-9-2/posts/new",className:"PostsList-new-button",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0441\u0442"})}),e.map((function(t){var e=t.id,a=t.content,s=t.created;return Object(r.jsxs)(v,{content:a,created:s,children:[Object(r.jsx)("img",{className:"PostsList-comment-image",src:w,width:"100%",alt:"no load"}),Object(r.jsx)(o.b,{to:{pathname:"/react-9-2/posts/"+e,state:{isEdit:!1}},className:"PostsList-post-button",children:"\u02ec"})]},e)}))]})},k=a.p+"static/media/newpost.d8711a45.jpg";var E=function(){var t=Object(s.useState)(""),e=Object(d.a)(t,2),a=e[0],n=e[1],c=Object(s.useContext)(j),i=c.setWaiting,u=c.setError,p=function(){var t=Object(h.a)(b.a.mark((function t(e){var r,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),a){t.next=3;break}return t.abrupt("return");case 3:return r={method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({id:0,content:a})},i(!0),t.next=7,N("https://react-9-2-backend.herokuapp.com/posts",r);case 7:s=t.sent,u(s.error),document.location.href=e.target.href;case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"NewPost",children:[Object(r.jsx)("img",{className:"NewPost-image",src:k,width:"100%",alt:"no load"}),Object(r.jsx)(o.b,{to:"/react-9-2",className:"NewPost-close",children:"\u274c"}),Object(r.jsx)("input",{className:"NewPost-input",type:"text",name:"text",value:a,placeholder:"\u0422\u0435\u043a\u0441\u0442 \u043f\u043e\u0441\u0442\u0430 (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f)",required:!0,onChange:function(t){n(t.target.value)}}),Object(r.jsx)("div",{className:"NewPost-post",children:Object(r.jsx)(o.b,{to:"/react-9-2",className:"NewPost-post-button",onClick:p,children:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"})})]})};var y=function(t){var e=t.match.params.id,a=Object(s.useContext)(j),n=a.data,c=a.setWaiting,i=a.setError,d=n.length&&n.find((function(t){return t.id===+e}));if(!d)return Object(r.jsx)(u.a,{to:"/react-9-2"});var p=function(){var t=Object(h.a)(b.a.mark((function t(a){var r,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),r={method:"DELETE"},c(!0),t.next=5,N("https://react-9-2-backend.herokuapp.com/posts/"+e,r);case 5:s=t.sent,i(s.error),document.location.href=a.target.href;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"ViewPost",children:Object(r.jsxs)(v,{content:d.content,created:d.created,children:[Object(r.jsx)(o.b,{to:"/react-9-2",className:"ViewPost-close",children:"\u274c"}),Object(r.jsxs)("div",{className:"ViewPost-modify",children:[Object(r.jsx)(o.b,{to:{pathname:"/react-9-2/posts/"+e,state:{isEdit:!0}},className:"ViewPost-edit",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(r.jsx)(o.b,{to:"/react-9-2",className:"ViewPost-delete",onClick:p,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})})},C=a.p+"static/media/editpost.4f8059c9.jpg";var S=function(t){var e=t.match.params.id,a=Object(s.useContext)(j),n=a.data,c=a.setData,i=a.setWaiting,p=a.setError,l=n.length?n.find((function(t){return t.id===+e})):{content:""},m=Object(s.useState)(l.content),f=Object(d.a)(m,2),O=f[0],x=f[1],v=Object(s.useState)(!1),g=Object(d.a)(v,2),w=g[0],P=g[1];if(!l.content)return Object(r.jsx)(u.a,{to:"/react-9-2"});var k={pathname:"/react-9-2/posts/"+e,state:{isEdit:!1}},E=function(){var t=Object(h.a)(b.a.mark((function t(a){var r,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),O){t.next=3;break}return t.abrupt("return");case 3:return r={method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({id:+e,content:O})},i(!0),t.next=7,N("https://react-9-2-backend.herokuapp.com/posts",r);case 7:return s=t.sent,p(s.error),t.next=11,N("https://react-9-2-backend.herokuapp.com/posts");case 11:s=t.sent,p(s.error),c(s.data),i(!1),P(!0);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"EditPost",children:[Object(r.jsx)("img",{className:"EditPost-image",src:C,width:"100%",alt:"no load"}),Object(r.jsx)(o.b,{to:k,className:"EditPost-close",children:"\u274c"}),Object(r.jsx)("input",{className:"EditPost-input",type:"text",name:"text",value:O,placeholder:"\u0422\u0435\u043a\u0441\u0442 \u043f\u043e\u0441\u0442\u0430 (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f)",required:!0,onChange:function(t){x(t.target.value)}}),Object(r.jsx)("div",{className:"EditPost-save",children:Object(r.jsx)(o.b,{to:k,className:"EditPost-save-button",onClick:E,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})}),w&&Object(r.jsx)(u.a,{to:k})]})};var D=function(){var t=Object(s.useContext)(j),e=t.waiting,a=t.error;return e?Object(r.jsx)("div",{className:"Fetch-waiting",children:Object(r.jsx)("p",{className:"Fetch-waiting-text",children:"Waiting..."})}):a?Object(r.jsx)("div",{className:"Fetch-error",children:Object(r.jsx)("p",{className:"Fetch-error-text",children:a})}):null};var L=function(){return Object(r.jsx)(p,{children:Object(r.jsx)(o.a,{children:Object(r.jsxs)("div",{className:"App",children:[Object(r.jsxs)(u.d,{children:[Object(r.jsx)(u.b,{path:"/react-9-2/posts/new",component:E}),Object(r.jsx)(u.b,{path:"/react-9-2/posts/:id([0-9]+)",render:function(t){var e=t.location,a=t.match;return e.state.isEdit?Object(r.jsx)(S,{match:a}):Object(r.jsx)(y,{match:a})}}),Object(r.jsx)(u.b,{path:"/react-9-2",component:P})]}),Object(r.jsx)(D,{})]})})})};i.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(L,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.95d86708.chunk.js.map